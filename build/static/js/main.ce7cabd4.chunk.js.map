{"version":3,"sources":["Persons.js","AddPerson.js","Filter.js","services/persons.js","Notification.js","index.js"],"names":["Person","props","id","person","name","number","onClick","removePerson","Persons","personsToShow","persons","filter","toLowerCase","includes","map","key","AddPerson","addPerson","newName","handleNewName","newNumber","handleNewNumber","onSubmit","value","onChange","type","Filter","filterValue","handleChange","baseUrl","axios","get","newObject","post","put","delete","Notification","message","className","App","useState","setPersons","setNewName","setNewNumber","newFilter","setNewFilter","errorMessage","setErrorMessage","useEffect","console","log","personService","then","response","data","length","updatePerson","personObject","window","confirm","catch","error","setTimeout","alert","event","target","preventDefault","some","e","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ce7cabd4.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Person = (props) => {\r\n\r\n    const id = props.person.id    \r\n\r\n    return(    \r\n        <div>\r\n            Name: {props.person.name}\r\n            &nbsp;\t&nbsp;\t&nbsp;Number: {props.person.number}\r\n            <button onClick={() => props.removePerson({id})}>Remove</button>\r\n        </div>\r\n    )\r\n}\r\n//<button onClick={props.handleClick}>Remove</button>\r\n    const Persons = ({persons, filter, removePerson})  => {\r\n        let personsToShow\r\n        //console.log(filter)\r\n        if (filter !==\"\"){\r\n            personsToShow = persons.filter(person => person.name.toLowerCase().includes(filter.toLowerCase()))\r\n        } else {\r\n            personsToShow = persons\r\n        }\r\n\r\n        const rows = () => personsToShow.map(person => \r\n            <Person\r\n                key = {person.name}\r\n                person = {person}\r\n                removePerson = {removePerson}\r\n            />\r\n            \r\n        )\r\n\r\n        return (\r\n            <ul>\r\n                {rows()}\r\n            </ul>\r\n        )\r\n   \r\n\r\n    \r\n}\r\n\r\nexport default Persons","import React from 'react'\r\n\r\nconst AddPerson = ({addPerson, newName, handleNewName, newNumber, handleNewNumber}) => {\r\n    return(\r\n    <form onSubmit={addPerson}> \r\n        <div>\r\n        name: <input value={newName} onChange={handleNewName}/> \r\n        <br></br>\r\n        number: <input value={newNumber} onChange={handleNewNumber}/>\r\n        </div>\r\n        <div>\r\n            <button type=\"submit\">add</button>\r\n        </div>\r\n    </form>\r\n    )\r\n}\r\n\r\nexport default AddPerson","import React from 'react'\r\n\r\nconst Filter = ({filterValue, handleChange}) => {\r\n\r\n    return(\r\n      <div>\r\n        filter :      \r\n        <input \r\n            value={filterValue} \r\n            onChange={handleChange}\r\n        /> \r\n      </div>\r\n    )\r\n    }\r\n\r\nexport default Filter;","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    return axios.get(baseUrl)\r\n}\r\n\r\nconst create = newObject => {\r\n    return axios.post(baseUrl, newObject)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    return axios.put(`${baseUrl}/${id}`, newObject)\r\n}\r\n\r\nconst remove = (id) => {\r\n    return axios.delete(`${baseUrl}/${id}`)\r\n}\r\n\r\n\r\nexport default {\r\n    getAll: getAll,\r\n    create: create, \r\n    update: update,\r\n    remove: remove\r\n}","import React from 'react'\r\n\r\nconst Notification = ({ message }) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n  \r\n    return (\r\n      <div className=\"error\">\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n\r\nexport default Notification","import React, { useState, useEffect } from \"react\";\r\nimport ReactDOM from 'react-dom'\r\nimport Persons from './Persons'\r\nimport AddPerson from './AddPerson'\r\nimport Filter from './Filter'\r\nimport personService from './services/persons'\r\nimport Notification from './Notification'\r\nimport './styles/index.css'\r\n/* json-server --watch db.json --port 3001 */\r\nconst App = () => {\r\n\r\n  \r\n\r\n  const [persons, setPersons] = useState([])\r\n  const [newName, setNewName] = useState(\"\")\r\n  const [newNumber, setNewNumber] = useState(\"\")\r\n  const [newFilter, setNewFilter] = useState(\"\")\r\n  const [errorMessage, setErrorMessage] = useState(null)\r\n\r\n\r\n\r\n const hook = () => {\r\n  console.log('effect')\r\n  personService\r\n    .getAll()\r\n    .then(response=>{\r\n      setPersons(response.data)\r\n    })\r\n}\r\n  useEffect(hook, [])\r\n  \r\n  \r\n  console.log('render',persons.length, 'persons');\r\n\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n    const personObject = {\r\n      name: newName,\r\n      number: newNumber\r\n    }\r\n\r\n    if(persons.some(e=> e.name.toLowerCase() === newName.toLowerCase())){ \r\n      console.log(newName,persons)\r\n      const result = persons.filter(person => {\r\n        return person.name === newName\r\n      })\r\n      const id = result[0].id\r\n      updatePerson({personObject, id});\r\n    }\r\n    else {\r\n    personService\r\n      .create(personObject)\r\n      .then(response => {\r\n        personService\r\n        .getAll()\r\n        .then(response=>{\r\n          setPersons(response.data)\r\n        })\r\n        setNewName('')\r\n        setNewNumber('')\r\n        setErrorMessage(\r\n          `You have added ${personObject.name} to the list !`\r\n        )\r\n        setTimeout(() => {\r\n          setErrorMessage(null)\r\n        },3000)\r\n      })\r\n      \r\n    }\r\n  }\r\n  const updatePerson = ({personObject, id}) => {\r\n    if(window.confirm(\"Person is already added to phonebook, replace the old number with a new one?\")){\r\n    personService\r\n      .update(id, personObject)\r\n      .then(response =>{\r\n        console.log(response.data)\r\n        personService\r\n        .getAll()\r\n        .then(response=>{\r\n          setPersons(response.data)\r\n        })\r\n      })\r\n      .catch(error => {     \r\n        setErrorMessage(\r\n          `${personObject.name} Was Already Removed from the server`\r\n        )\r\n      setTimeout(() => {\r\n        setErrorMessage(null)\r\n      },5000)\r\n    },\r\n    setErrorMessage(\r\n      `You have updated ${personObject.name} information`\r\n    ),\r\n    setTimeout(() => {\r\n      setErrorMessage(null)\r\n    },5000)\r\n    )}\r\n    else{\r\n      window.alert(\"You decided to keep the old data\")\r\n    }\r\n  }\r\n  const removePerson = ({id}) => {\r\n    console.log(\"Button Clickeeed\")\r\n    console.log({id})\r\n    personService\r\n      .remove(id)\r\n      .then(response =>{\r\n        console.log(response.data)\r\n        personService\r\n        .getAll()\r\n        .then(response=>{\r\n          setPersons(response.data)\r\n        })\r\n      })\r\n      setErrorMessage(\r\n        `You have removed a person from the list !`\r\n      )\r\n      setTimeout(() => {\r\n        setErrorMessage(null)\r\n      },5000)\r\n      \r\n  }\r\n  \r\n  const handleNewName = (event) => {\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const handleNewNumber = (event) => {\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  const handleFilterChange = (event) => {\r\n    setNewFilter(event.target.value)\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Notification message={errorMessage}/>\r\n      <h2>Phonebook</h2>\r\n      <Filter filterValue={newFilter} handleChange={handleFilterChange}/>\r\n      <AddPerson \r\n      addPerson = {addPerson}\r\n      newName = {newName}\r\n      handleNewName = {handleNewName}\r\n      newNumber = {newNumber}\r\n      handleNewNumber = {handleNewNumber}\r\n      />\r\n      <h2>Numbers</h2>\r\n      <Persons\r\n       persons={persons}\r\n       filter={newFilter}\r\n       removePerson={removePerson}\r\n       />\r\n    </div>\r\n  );\r\n};\r\n\r\nReactDOM.render(\r\n  <App />,\r\n  document.getElementById('root')\r\n)\r\n"],"sourceRoot":""}